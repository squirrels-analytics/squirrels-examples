project_variables:
  name: expenses
  label: "Sample Expenses"
  description: This is a sample Squirrels project for analyzing expense transactions
  major_version: 1
  auth_type: optional                     ## one of 'optional' (default) or 'required'


packages: []

## Example for packages section:
# packages:
#   - git: https://.../myrepo.git
#     revision: v0.1.0
#     directory: custom_name ## optional


## Connection URIs are usually in format "dialect://username:password@host:port/database" for database connections
## However, subtle differences exist depending on the "type" specified. For example, sqlite URIs are slightly different.
##   sqlalchemy:      sqlite:///{project_path}/relative/path/to/database.db
##   connectorx/adbc: sqlite://{project_path}/relative/path/to/database.db  (adbc URI format matches connectorx)
##   duckdb:          sqlite:{project_path}/relative/path/to/database.db
## Refer to specific documentation for supported databases by type (with URI examples):
##   sqlalchemy: https://docs.sqlalchemy.org/en/latest/core/engines.html#database-urls
##   connectorx: https://sfu-db.github.io/connector-x/databases.html
##   adbc:       https://arrow.apache.org/adbc/ (see connectorx documentation for URI examples)
connections:
  - name: default
    label: SQLite Expenses Database
    type: sqlalchemy                      ## one of: sqlalchemy, connectorx, adbc, or duckdb
    uri: {{ env_vars.SQLITE_URI }}        ## using Jinja to substitute environment variables


configurables:
  - name: user_name
    label: User Name
    default: John Doe
    description: The name of the user to use for the expenses project

  - name: user_role
    label: User Role
    default: staff
    description: The role of the user to use for the expenses project


datasets:
  - name: expense_transactions            ## model name uses same name unless "model" field is specified
    label: Expense Transactions - DBView Example
    description: All expense transactions
    model: dbview_example 
    scope: private                        ## optional - one of 'public', 'protected', or 'private'. Default is 'public' (if auth_type is 'optional') or 'protected' (if auth_type is 'required').
    parameters:                           ## optional - if not specified, then all parameters are used
      - start_date
      - end_date
      - min_filter
      - max_filter
  
  - name: grouped_expenses
    label: Grouped Expenses - Federate Example
    description: Aggregated expense transactions by custom dimension using federate_example model
    model: federate_example
    parameters:
      - group_by
      - date_range
      - category
      - subcategory
      - between_filter


selection_test_sets:
  - name: set_start_date
    parameters:                           ## optional section - if not provided, then default value is used for all parameters
      start_date: 2024-07-01              ## this parameter is only used by model "dbview_example"
  
  - name: set_date_range
    parameters:
      date_range: [2024-02-01,2024-11-30] ## this parameter is only used by model "federate_example"
    
  - name: use_admin_privileged_group_by
    user:
      access_level: admin
    parameters:
      group_by: trans